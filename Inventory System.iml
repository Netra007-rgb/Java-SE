//Java+SE project for Inventory Management System.

import java.util.*;
import java.time.LocalDateTime;

//-------------------- Delivery Station Class --------------------//
class DeliveryStation {
    String stationName;
    String location;
    String managerName;
    String contactNumber;

    DeliveryStation(String stationName, String location, String managerName, String contactNumber)
    {
        this.stationName = stationName;
        this.location = location;
        this.managerName = managerName;
        this.contactNumber = contactNumber;
    }

    void displayStation() {
        System.out.println("Station: " + stationName);
        System.out.println("Location: " + location);
        System.out.println("Manager: " + managerName);
        System.out.println("Contact: " + contactNumber);
    }
}

//-------------------- Package Class --------------------//
class PackageInfo
{
    String packageId;
    String customerName;
    String address;
    String itemName;
    String packagingStatus;
    String deliveryStatus;
    DeliveryStation station;
    LocalDateTime dateTime;
    int quantity;

    PackageInfo(String packageId, String customerName, String address, String itemName, int quantity, DeliveryStation station) {
        this.packageId = packageId;
        this.customerName = customerName;
        this.address = address;
        this.itemName = itemName;
        this.quantity = quantity; // store quantity
        this.station = station;
        this.packagingStatus = "Pending";
        this.deliveryStatus = "In Transit";
        this.dateTime = LocalDateTime.now();
    }


    void updatePackagingStatus(String newStatus) {
        if (newStatus.equalsIgnoreCase("Packed") || newStatus.equalsIgnoreCase("Dispatched")) {
            this.packagingStatus = newStatus;
            this.dateTime = LocalDateTime.now();
            System.out.println("Packaging status updated successfully!");
        } else {
            System.out.println("Invalid packaging status!");
        }
    }

    void updateDeliveryStatus(String newStatus, DeliveryStation newStation) {
        this.deliveryStatus = newStatus;
        this.station = newStation;
        this.dateTime = LocalDateTime.now();
        System.out.println("Delivery status updated successfully!");
    }
}

//-------------------- Feedback Class --------------------//
class Feedback {
    String customerName;
    String comment;
    int rating;

    Feedback(String customerName, String comment, int rating) {
        this.customerName = customerName;
        this.comment = comment;
        this.rating = rating;
    }

    void displayFeedback() {
        System.out.println("Customer: " + customerName);
        System.out.println("Rating: " + rating + "/5");
        System.out.println("Comment: " + comment);
    }
}

//-------------------- Advanced Product System (Clothing Store) --------------------//
class Product {
    private int productId;
    private String name;
    private double price;
    private int stock;

    public Product(int productId, String name, double price, int stock) {
        this.productId = productId;
        this.name = name;
        this.price = price;
        this.stock = stock;
    }

    public int getProductId() { return productId; }
    public double getPrice() { return price; }
    public String getName() { return name; }

    public boolean reduceStock(int quantity) {
        if (stock >= quantity) {
            stock -= quantity;
            return true;
        }
        return false;
    }

    public void display() {
        System.out.println(productId + " | " + name + " | Price: â‚¹" + price + " | Stock: " + stock);
    }
}

class Clothing extends Product {
    private String size;
    private String category;

    public Clothing(int productId, String name, double price, int stock, String size, String category) {
        super(productId, name, price, stock);
        this.size = size;
        this.category = category;
    }

    @Override
    public void display() {
        super.display();
        System.out.println("    Category: " + category + ", Size: " + size);
    }
}

class Inventory {
    private Product[] products;
    private int count;

    public Inventory() {
        products = new Product[40];
        count = 0;

        products[count++] = new Clothing(101, "Oversized T-Shirt", 699, 40, "L", "T-Shirt");
        products[count++] = new Clothing(102, "Graphic Tee", 799, 35, "M", "T-Shirt");
        products[count++] = new Clothing(103, "Cargo Pants", 1799, 20, "32", "Pants");
        products[count++] = new Clothing(104, "Baggy Jeans", 1999, 18, "34", "Jeans");
        products[count++] = new Clothing(105, "Streetwear Hoodie", 2499, 15, "XL", "Hoodie");
        products[count++] = new Clothing(106, "Crop Hoodie", 1899, 22, "M", "Hoodie");
        products[count++] = new Clothing(107, "Varsity Jacket", 2999, 10, "L", "Jacket");
        products[count++] = new Clothing(108, "Puffer Jacket", 3499, 8, "XL", "Jacket");
        products[count++] = new Clothing(109, "Ripped Jeans", 1899, 17, "32", "Jeans");
        products[count++] = new Clothing(110, "Wide Leg Pants", 1699, 25, "M", "Pants");

        products[count++] = new Clothing(111, "Anime Print Tee", 899, 30, "L", "T-Shirt");
        products[count++] = new Clothing(112, "Y2K Top", 1299, 28, "S", "Top");
        products[count++] = new Clothing(113, "Denim Jacket", 2799, 12, "L", "Jacket");
        products[count++] = new Clothing(114, "Fitted Shirt", 1499, 20, "M", "Shirt");
        products[count++] = new Clothing(115, "Flared Pants", 1899, 14, "32", "Pants");
        products[count++] = new Clothing(116, "Sleeveless Tank", 599, 45, "M", "Top");
        products[count++] = new Clothing(117, "Oversized Sweater", 2199, 16, "XL", "Sweater");
        products[count++] = new Clothing(118, "Korean Style Shirt", 1599, 22, "M", "Shirt");
        products[count++] = new Clothing(119, "Denim Skirt", 1399, 19, "S", "Skirt");
        products[count++] = new Clothing(120, "Cargo Skirt", 1499, 18, "M", "Skirt");

        products[count++] = new Clothing(121, "Tie-Dye T-Shirt", 899, 27, "L", "T-Shirt");
        products[count++] = new Clothing(122, "Minimalist Hoodie", 2299, 13, "XL", "Hoodie");
        products[count++] = new Clothing(123, "Techwear Pants", 2599, 11, "34", "Pants");
        products[count++] = new Clothing(124, "Layered Necklace Tee", 999, 24, "M", "T-Shirt");
        products[count++] = new Clothing(125, "Denim Co-ord Set", 3299, 9, "M", "Co-ord");
        products[count++] = new Clothing(126, "Printed Kurti", 1799, 21, "L", "Ethnic Wear");
        products[count++] = new Clothing(127, "Oversized Blazer", 2899, 14, "L", "Blazer");
        products[count++] = new Clothing(128, "Mesh Top", 1199, 26, "S", "Top");
        products[count++] = new Clothing(129, "Street Joggers", 1599, 23, "M", "Joggers");
        products[count++] = new Clothing(130, "Denim Overalls", 2699, 10, "M", "Overalls");
    }

    public void showInventory() {
        System.out.println("\n--- CLOTHING STORE INVENTORY ---");
        for (int i = 0; i < count; i++) {
            products[i].display();
        }
    }

    public Product findProduct(int productId) {
        for (int i = 0; i < count; i++) {
            if (products[i].getProductId() == productId) {
                return products[i];
            }
        }
        return null;
    }
}

//-------------------- Sale Record Class --------------------//
class SaleRecord {
    int productId;
    String productName;
    int quantity;
    double price;
    double totalAmount;
    LocalDateTime saleTime;

    SaleRecord(int productId, String productName, int quantity, double price) {
        this.productId = productId;
        this.productName = productName;
        this.quantity = quantity;
        this.price = price;
        this.totalAmount = quantity * price;
        this.saleTime = LocalDateTime.now();
    }

    void display() {
        System.out.println("Product ID: " + productId);
        System.out.println("Product Name: " + productName);
        System.out.println("Quantity Sold: " + quantity);
        System.out.println("Price: â‚¹" + price);
        System.out.println("Total Amount: â‚¹" + totalAmount);
        System.out.println("Sold At: " + saleTime);
        System.out.println("---------------------------");
    }
}

//-------------------- MAIN SYSTEM --------------------//
public class Main2 {
    static int pid;
    // -------------------- Unified Package Display --------------------//
    static void printPackage(String packageId, String productName, String customerName, String address,
                             int quantity, String packagingStatus, String deliveryStatus,
                             DeliveryStation station, LocalDateTime dateTime) {
        System.out.println("\n----- PACKAGE SLIP -----");
        System.out.println("Package ID: " + packageId);
        System.out.println("Product Name: " + productName);
        if (customerName != null) System.out.println("Customer: " + customerName);
        if (address != null) System.out.println("Address: " + address);
        System.out.println("Quantity: " + quantity);
        System.out.println("Packaging Status: " + packagingStatus);
        System.out.println("Delivery Status: " + deliveryStatus);
        System.out.println("Current Station: " + station.stationName);
        System.out.println("Location: " + station.location);
        System.out.println("Manager: " + station.managerName);
        System.out.println("Contact: " + station.contactNumber);
        System.out.println("Last Updated: " + dateTime);
        System.out.println("---------------------------\n");
    }


    public static void main(String[] args)
    {
        Scanner sc = new Scanner(System.in);

        // For Sales & Feedback
        Feedback feedback = null;
        ArrayList<SaleRecord> salesToday = new ArrayList<>();

        DeliveryStation[] stations = {
                new DeliveryStation("Jammu & Kashmir", "Srinagar", "Amit Dar", "9876543210"),
                new DeliveryStation("Delhi", "Chandni Chowk", "Kamal Sharma", "9988776655"),
                new DeliveryStation("Ahmedabad", "C.G.Road", "Lokesh Shah", "8270779558"),
                new DeliveryStation("Kolkata", "Park Street", "Ishaan Chatterjee", "7086977221"),
                new DeliveryStation("Bangalore", "Indiranagar", "Dhanush Gowda", "9857974212")
        };
        PackageInfo[] packages = new PackageInfo[20];
        int pkgCount = 0;

        // Clothing inventory
        Inventory inventory = new Inventory();
        //Order order = new Order();
        int mainChoice;
        do {
            System.out.println("\n===== INVENTORY MANAGEMENT SYSTEM =====");
            System.out.println("1.Admin");
            System.out.println("2.Customer");
            System.out.println("Enter Your Choice: ");
            mainChoice = sc.nextInt();

            switch (mainChoice) {
                case 1:
                    int choice;
                    do {
                        System.out.println("\n--- ADMIN MENU ---");
                        System.out.println("1. View Product Sold Today");
                        System.out.println("2. View Feedback");
                        System.out.println("3. Add New Package");
                        System.out.println("4. Update Packaging Status");
                        System.out.println("5. Update Delivery Status & Station");
                        System.out.println("6. View All Packages");
                        System.out.println("7. View Station Details");
                        System.out.println("8. Back to Main Menu");
                        System.out.println("Enter your Choice: ");
                        choice = sc.nextInt();

                        switch (choice) {
                            case 1:
                                if (salesToday.isEmpty()) {
                                    System.out.println("No products sold today");
                                } else {
                                    System.out.println("\n--- PRODUCTS SOLD TODAY ---");
                                    for (SaleRecord s : salesToday) {
                                        s.display();
                                    }
                                }
                                break;

                            case 2:
                                if (feedback != null) feedback.displayFeedback();
                                else System.out.println("No feedback available.");
                                break;

                            case 3:
                                if (pkgCount < packages.length) {
                                    sc.nextLine(); // consume newline
                                    System.out.print("Enter Package ID / Product ID: ");
                                    String id = sc.nextLine();

                                    // Check if product exists
                                    Product p = inventory.findProduct(Integer.parseInt(id));
                                    if (p != null) {
                                        System.out.print("Enter Customer Name: ");
                                        String name = sc.nextLine();
                                        System.out.print("Enter Address: ");
                                        String addr = sc.nextLine();
                                        System.out.print("Enter Quantity: ");
                                        int qty = sc.nextInt();
                                        sc.nextLine(); // consume newline

                                        // Add package
                                        packages[pkgCount++] = new PackageInfo(id, name, addr, p.getName(), qty, stations[0]);
                                        System.out.println("Package added successfully!");
                                    } else {
                                        System.out.println("Product ID does not exist! Cannot add package.");
                                    }
                                } else {
                                    System.out.println("Package storage full.");
                                }
                                break;

                            case 4: // Update Packaging Status
                                sc.nextLine(); // consume leftover newline
                                System.out.print("Enter Package ID to update packaging status: ");
                                String pkgIdToUpdate = sc.nextLine();
                                boolean foundPkg = false;
                                for (int i = 0; i < pkgCount; i++) {
                                    if (packages[i].packageId.equalsIgnoreCase(pkgIdToUpdate)) {
                                        System.out.print("Enter new packaging status (Packed/Dispatched/Shipped): ");
                                        String newStatus = sc.nextLine();

                                        // Only update if valid
                                        if (newStatus.equalsIgnoreCase("Packed") ||
                                                newStatus.equalsIgnoreCase("Dispatched") ||
                                                newStatus.equalsIgnoreCase("Shipped")) {

                                            packages[i].updatePackagingStatus(newStatus);
                                            foundPkg = true;
                                        } else {
                                            System.out.println("Invalid status! Only 'Packed', 'Dispatched', or 'Shipped' allowed.");
                                        }
                                        break; // Stop searching once found
                                    }
                                }
                                if (!foundPkg) {
                                    System.out.println("Package not found!");
                                }
                                break;

                            case 5: // Update Delivery Status & Station
                                sc.nextLine(); // consume leftover newline
                                System.out.print("Enter Package ID to update delivery status: ");
                                String pkgIdDelivery = sc.nextLine();
                                boolean foundDelivery = false;
                                for (int i = 0; i < pkgCount; i++) {
                                    if (packages[i].packageId.equalsIgnoreCase(pkgIdDelivery)) {
                                        // Select new station
                                        System.out.println("Select New Station [1-5]:");
                                        for (int s = 0; s < stations.length; s++)
                                            System.out.println((s + 1) + ". " + stations[s].stationName);

                                        int stationChoice = sc.nextInt();
                                        sc.nextLine(); // consume newline
                                        if (stationChoice < 1 || stationChoice > stations.length) {
                                            System.out.println("Invalid station choice!");
                                            break;
                                        }
                                        System.out.print("Enter new delivery status (In Transit/Delivered): ");
                                        String deliveryStatus = sc.nextLine();

                                        packages[i].updateDeliveryStatus(deliveryStatus, stations[stationChoice - 1]);
                                        foundDelivery = true;
                                        break; // Stop searching once found
                                    }
                                }
                                if (!foundDelivery) {
                                    System.out.println("Package not found!");
                                }
                                break;

                            case 6:
                                boolean foundPackage = false;
                                // 1ï¸âƒ£ Manually added packages
                                if (pkgCount > 0) {
                                    System.out.println("\n--- MANUALLY ADDED PACKAGES ---");
                                    for (int i = 0; i < pkgCount; i++) {
                                        PackageInfo p = packages[i];
                                        printPackage(p.packageId, p.itemName, p.customerName, p.address, p.quantity,
                                                p.packagingStatus, p.deliveryStatus, p.station, p.dateTime);
                                        foundPackage = true;
                                    }
                                }
                                // 2ï¸âƒ£ Packages from products sold today
                                if (!salesToday.isEmpty()) {
                                    System.out.println("\n--- PACKAGES FROM TODAY'S SALES ---");
                                    for (SaleRecord s : salesToday) {
                                        printPackage(String.valueOf(s.productId), s.productName, null, null, s.quantity,
                                                "Packed", "In Transit", stations[0], s.saleTime);
                                        foundPackage = true;
                                    }
                                }
                                // 3ï¸âƒ£ Nothing found
                                if (!foundPackage) {
                                    System.out.println("No packages found");
                                }
                                break;

                            case 7:
                                for (DeliveryStation st : stations) st.displayStation();
                                break;

                            case 8:
                                System.out.println("Returning...");
                                choice=5;
                                break;
                            default:
                                System.out.println("Invalid choice!");
                        }
                    } while (choice != 5);
                    break;

                case 2:
                    boolean hasOrder=false;
                    do {
                        System.out.println("\n--- CUSTOMER MENU ---");
                        System.out.println("1. Show Inventory");
                        System.out.println("2. Order Product");
                        System.out.println("3. Give Feedback");
                        System.out.println("4. Check Delivery Status");
                        System.out.println("5. Back to Main Menu");
                        System.out.print("Enter choice: ");
                        choice = sc.nextInt();

                        switch (choice) {
                            case 1:
                                inventory.showInventory();
                                break;

                            case 2:
                                System.out.print("Enter Product ID: ");
                                pid = sc.nextInt();
                                Product selected = inventory.findProduct(pid);

                                if (selected == null) {
                                    System.out.println("Product not found!");
                                } else {
                                    System.out.print("Enter Quantity: ");
                                    int q = sc.nextInt();

                                    if (selected.reduceStock(q)) {
                                        System.out.println("Order placed successfully!");
                                        System.out.println("Total Amount: â‚¹" + (q * selected.getPrice()));

                                        // ðŸ”¹ STORE SOLD PRODUCT
                                        salesToday.add(new SaleRecord(pid,selected.getName(),q, selected.getPrice()
                                        ));

                                        hasOrder = true;
                                    } else {
                                        System.out.println("Order failed: Insufficient stock.");
                                    }
                                }

                                break;

                            case 3:
                                if (!hasOrder) {
                                    System.out.println("No Order Placed.");
                                    break;
                                }
                                sc.nextLine();
                                System.out.print("Customer Name: ");
                                String cname = sc.nextLine();
                                System.out.print("Comment: ");
                                String cmt = sc.nextLine();
                                System.out.print("Rating (1-5): ");
                                int rate = sc.nextInt();
                                boolean b=true;
                                while(b){
                                    if(rate>5 || rate<0){
                                        System.out.println("Enter rating between 1 to 5");
                                        rate=sc.nextInt();
                                    }
                                    else{
                                        b=false;
                                    }
                                }
                                feedback = new Feedback(cname, cmt, rate);
                                System.out.println("Feedback saved!");
                                break;

                            case 4:
                                if (!hasOrder) {
                                    System.out.println("No Order Placed.");
                                    break;
                                }
                                sc.nextLine(); // consume newline
                                System.out.print("Enter Package ID: ");
                                String customerPkgId = sc.nextLine();
                                boolean foundCustomerPkg = false;

                                // Check manually added packages
                                for (int i = 0; i < pkgCount; i++) {
                                    if (packages[i].packageId.equalsIgnoreCase(customerPkgId)) {
                                        PackageInfo p = packages[i];
                                        printPackage(p.packageId, p.itemName, p.customerName, p.address, p.quantity,
                                                p.packagingStatus, p.deliveryStatus, p.station, p.dateTime);
                                        foundCustomerPkg = true;
                                        break;
                                    }
                                }
                                // Check packages from sold products
                                if (!foundCustomerPkg) {
                                    for (SaleRecord s : salesToday) {
                                        if (String.valueOf(s.productId).equals(customerPkgId)) {
                                            printPackage(String.valueOf(s.productId), s.productName, null, null, s.quantity,
                                                    "Packed", "In Transit", stations[0], s.saleTime);
                                            foundCustomerPkg = true;
                                            break;
                                        }
                                    }
                                }
                                if (!foundCustomerPkg) {
                                    System.out.println("Package not found!");
                                }
                                break;


                            case 5:
                                System.out.println("Returning...");
                                choice = 0;
                                break;

                            case 0:
                                System.out.println("Thank you for using the Inventory Management System!");
                                break;

                            default:
                                System.out.println("Invalid choice!");
                        }
                    } while (choice != 0);
                    break;
            }
        }while(mainChoice!=0);
    }
}

